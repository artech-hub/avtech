# GitHub Pages Setup Guide

This guide explains how to configure GitHub Pages for your Angular project to work with the CI/CD deployment workflow.

## Repository Settings Configuration

### 1. Configure GitHub Pages Source

1. Go to your repository on GitHub
2. Navigate to **Settings** > **Pages**
3. Under **Source**, select **GitHub Actions**
4. Click **Save**

### 2. Enable GitHub Actions Permissions

1. Go to **Settings** > **Actions** > **General**
2. Under **Workflow permissions**, select **Read and write permissions**
3. Check **Allow GitHub Actions to create and approve pull requests**
4. Click **Save**

### 3. Create GitHub Pages Environment (Optional but Recommended)

1. Go to **Settings** > **Environments**
2. Click **New environment**
3. Name it **github-pages**
4. Click **Configure environment**
5. Under **Deployment branches**, select **Selected branches**
6. Add rule for **main** branch
7. Click **Save protection rules**

## How the Deployment Works

### Workflow Overview

1. **Trigger**: Push to main branch or manual dispatch
2. **Build**: Install dependencies and build Angular app
3. **Prepare**: Handle Angular 17+ output structure and add required files
4. **Deploy**: Use GitHub's built-in Pages deployment action

### Key Features

- **No local build artifacts**: All builds happen in CI/CD
- **Automatic structure handling**: Handles Angular 17+ browser subfolder
- **Custom domain support**: Maintains CNAME file for avtechcompany.in
- **SPA routing**: Creates 404.html for single-page application routing
- **Proper permissions**: Uses GitHub Actions with proper permissions

### Required Files (Tracked in Git)

```
docs/
├── CNAME              # Custom domain configuration
├── robots.txt         # SEO robots file
├── sitemap.xml        # SEO sitemap
├── 404.html          # Custom 404 page (optional)
└── .nojekyll         # Disable Jekyll processing (created by CI)
```

### Build Artifacts (Generated by CI, Not Tracked)

```
docs/
├── index.html        # Main app entry point
├── main-*.js         # Angular application bundles
├── polyfills-*.js    # Browser polyfills
├── styles-*.css      # Compiled styles
├── favicon.ico       # App icon
├── assets/           # Static assets
└── browser/          # Angular 17+ output (moved to root by CI)
```

## Troubleshooting

### Permission Errors (403)

If you see permission errors:
1. Check **Actions** > **General** > **Workflow permissions**
2. Ensure **Read and write permissions** is selected
3. Try using **GitHub Actions** as Pages source instead of **Deploy from a branch**

### Build Failures

If builds fail:
1. Check the **Actions** tab for detailed error logs
2. Ensure `npm run build:ci` works locally
3. Verify all dependencies are in `package.json`

### Custom Domain Issues

If custom domain doesn't work:
1. Verify DNS settings point to GitHub Pages
2. Check that CNAME file contains correct domain
3. Wait for DNS propagation (up to 24-48 hours)

## Verification

After setup, verify:
1. Go to **Actions** tab and check workflow runs
2. Visit your GitHub Pages URL
3. Check custom domain (if configured)
4. Test SPA routing with direct URL access

## Benefits of This Setup

- ✅ No manual build artifact management
- ✅ Automatic deployment on code changes
- ✅ Proper CI/CD workflow
- ✅ Custom domain support
- ✅ SEO-friendly configuration
- ✅ SPA routing support
- ✅ No merge conflicts from build files